@model IEnumerable<prototipo2.Models.Reparacion>
@{
    ViewData["Title"] = "Lista de Reparaciones";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="row justify-content-center">
    <div class="container-sm py-3 col-11">

        <h1>@ViewData["Title"]</h1>

        <!-- ojo estoos son los botones para crear o exportar -->
        <a asp-controller="Reparacion" asp-action="Crear" class="btn btn-primary mt-3">Agregar Reparación</a>
        <a asp-action="ExportarExcel" class="btn btn-success mt-3 ms-2">Exportar a Excel</a>
        <a asp-action="ExportarReparacionesPDF" class="btn btn-outline-danger mt-3 ms-2">
            <i class="fas fa-file-pdf"></i> Exportar a PDF
        </a>

        <!-- Tabla de reparaciones -->
        <div class="card mt-4">
            <div class="card-body">
                <table class="table table-striped mt-4" id="datatablesSimple" style="width:100%">
                    <thead class="table-secondary">
                        <tr>
                            <th>ID</th>
                            <th>Fecha Ingreso</th>
                            <th>Fecha Salida</th>
                            <th>Descripción</th>
                            <th>Estado</th>
                            <th>Cédula del Cliente</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.IdReparacion</td>
                                <td>@item.Fecha_Ingreso.ToShortDateString()</td>
                                <td>@item.Fecha_Salida.ToShortDateString()</td>
                                <td>@item.Descripcion</td>
                                <td>@item.Estado</td>
                                <td>@item.IdCliente</td>
                                <td>
                                    <a asp-action="Editar" asp-route-id="@item.IdReparacion" class="btn btn-warning btn-sm">Editar</a>
                                    <a asp-action="Consultar" asp-route-id="@item.IdReparacion" class="btn btn-info btn-sm">Ver</a>
                                    <a asp-action="Eliminar" asp-route-id="@item.IdReparacion" class="btn btn-danger btn-sm">Eliminar</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Simple DataTables JS -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"></script>
    <script src="~/js/Reparacion.js"></script>
}
